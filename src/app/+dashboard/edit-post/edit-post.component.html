<h2 class="page-title">Edit post</h2>

<form novalidate [formGroup]="editPostForm" (ngSubmit)="onSubmit()">

  <section class="post-box-view mb-15">

    <mat-form-field>
      <input
        matInput
        type="text"
        name="title"
        formControlName="title"
        ngModel
        required
        minlength="3"
        placeholder="title">
      <mat-error>Please enter title</mat-error>
    </mat-form-field>

    <mat-form-field>
            <textarea
              matInput
              cols="30" rows="10"
              name="content"
              formControlName="content"
              required
              placeholder="content"></textarea>
      <mat-error
        *ngIf="!editPostForm.get('content').valid &&
      editPostForm.get('content').touched &&
      formSubmitAttempt">Please enter Content</mat-error>
    </mat-form-field>

    <div>
      <button
        mat-stroked-button
        type="button"
        (click)="filePicker.click()">Pick Image</button>
      <input type="file" #filePicker (change)="onImagePicked($event)">
      <div class="post-img-box"
           *ngIf="imagePreview !== '' && imagePreview !== null && editPostForm.get('image').valid">
        <img [src]="imagePreview" [alt]="'Post Image'">
        <span
          class="remove-image"
          (click)="removeImage()"
          title="Remove image"><i class="material-icons">delete</i></span>
      </div>
    </div>


    <mat-form-field>
      <input
        matInput
        type="text"
        name="tags"
        autocomplete="off"
        (keyup)="addTag($event)"
        placeholder="tags">
    </mat-form-field>

    <div class="tag-list">
      <h5 class="tag-list-title">tags : </h5>
      <app-tag
        [tagsArray]="clonedTagsArray"
        [removable]="true"
        (filteredTags)="onRemoveTags($event)"></app-tag>
    </div>

  </section>

  <input
    type="hidden"
    name="id"
    formControlName="id"
  >
  <div class="position-buttons">
    <button
      mat-raised-button
      class="erb-button-right"
      color="accent"
      type="submit">Save Changes </button>
  </div>

</form>
